# 안드로이드 녹음 기능에 대한..


## MediaRecorder 한계점..
MediaRecorder 을 기존에 사용하고 있었는데, 
<br>녹취 중 녹취는 그대로 유지하면서 녹취 중인 파일을 별도의 백업파일로 저장해야하는 상황 발생.
<br>→ 버퍼를 사용하지 않는 MediaRecorder은 무조건 녹취를 종료해야만 저장할 수 있음.
<br>→ 따라서 버퍼를 사용할 수 있는 AudioRecord로 변경.

참고 - [자료조사(2) - 안드로이드의 오디오를 녹음하는 세 가지 방법](https://techlog.gurucat.net/130)

## AudioRecord 한계점..
`bufferSize`(샘플레이트, 채널, 오디오포멧) 정도는 설정 가능하지만 기본적으로는 아날로그 파형을 디지털로 변환한 신호를 버퍼로 기록. 
<br>→ PCM 파일로 저장됨.
<br>→ 이를 헤더부분만 추가시켜서 wav 파일로 간단히 만들 수 있지만 압축되지 않은 이 파일은 파일 크기가 큼.
<br>→ 따라서 인코딩해서 m4a, mp3 같은 파일 만들라면 딴거 필요함.
1. LAME MP3 라이브러리 써서 wav → mp3 로 인코딩을 하던가
2. MediaMuxer 써서 인코딩을 하던가

LGPL 라이센스라서 상관은 없는데 따로 외부 라이브러리 사용 안해도 되는 2번 방법 채택.
Android의 **`MediaMuxer`** 클래스가 지원하는 인코딩 확장자 목록

- **`mp4`** : MPEG-4 컨테이너 포맷
- **`webm`** : WebM 컨테이너 포맷
- **`ts`** : MPEG-2 전송 스트림 컨테이너 포맷
- **`aac`** : AAC 오디오 스트림을 위한 .aac 파일
- **`mka`** : Matroska 오디오 스트림을 위한 Matroska 컨테이너

기존에도 aac 포맷으로 인코딩 되고, mp3 확장자로 저장하는 방식이라서 기존과 비슷하게 짤 수 있을 듯해서 코드 작성

# 결과
